Process the provided pdf file (e.g. ch100-general-background.pdf) and convert it into a single, well-structured XML document representing one chapter of the Compendium. First, extract all of the text from the pdf verbatim. For any hyperlinked text, convert that to an <a> tag with an href attribute. Next, convert the text to xml as described below.

For the introduction document, parse the text into header elements and `<paragraph>` elements and any other appropriate markup.
The `revision-history.txt` file should be parsed as an html table. Text that is not within the table should be parsed as headers and paragraphs.
For chapters from the Compendium, follow these specific guidelines:

XML Structure and Content:

Root Element: The root element must be `<chapter>`.

Hierarchy:

Use `<section>` for major numbered sections (e.g., 101, 102). Add a `@label` attribute with the section number (e.g., `label="101"`) and an `id` attribute suitable for linking (e.g., `id="sec-101"`). Include the section title within a `<section_title>` element.

Use `<subsection>` for numbered subsections (e.g., 101.1, 101.2). Add a `@label` attribute with the subsection number (e.g., `label="101.1"`) and an `id` attribute (e.g., `id="subsec-101-1"`). Include the subsection title within a `<subsection_title>` element.

Use <provision> for numbered or lettered sub-parts directly under a subsection (e.g., 101.2(A), 101.3(A), 102.2(A), 102.5(i)). Add a @label attribute with the identifier (e.g., label="101.2(A)") and an id attribute (e.g., id="prov-101-2-A"). Include the provision title within a <provision_title> element. 

For any other title, use a <level_title> element.

For titles, if the section, subsection or provision title are available, parse them in a <num> element.

Use <paragraph> for all unnumbered blocks of text within <section>, <subsection>, or <provision> elements.

Use <list> to enclose items that appear as bullet points in the original text (e.g., the historical examples under 101.1, the points under 101.2(I), 101.3(A), 102.2(A), and the timeline under 102.7).

Use <item> for each individual bullet point within a <list>. Nested lists/items are permitted (e.g., under 101.3(A) Public Records).

Text Handling:

Copy all textual content verbatim from the original document into the appropriate XML elements, preserving formatting like italics where possible or noting it.

Remove extraneous page headers and footers (e.g., "C O M P E N D I U M...", "Chapter 100 : X ...", page numbers, dates repeated in headers/footers).

Clean up PDF artifacts, such as words incorrectly split by spaces (e.g., "govern ment" should become "government").

Encode all special characters (e.g., & -> &amp;, < -> &lt;, > -> &gt;) to ensure valid XML.

Ensure that paragraphs are properly enclosed within their respective sections, subsections, or provisions.

Table of Contents (TOC):

Include the Table of Contents found at the beginning of the document.

Parse it using a <toc> element containing multiple <tocitem> elements.

Each <tocitem> must have a @label attribute corresponding to the section/subsection/provision number it references.

Implement internal linking: Each <tocitem> should contain an <a> tag with an href attribute pointing to the id of the corresponding <section>, <subsection>, or <provision> element (e.g., <tocitem label="101"><a href="#sec-101">101 </a>The U.S. Copyright Office</tocitem>). The section number should be included in the text.

Styling and Metadata:

Include a `<head>` element at the beginning of the `<chapter>`, before the `<toc>`.

Tables:
If the original document contains any tables, represent them using `<table>`, `<tr>`, `<th>`, and `<td>` elements. Ensure that the table structure is maintained, and include any headers and data cells as per the original formatting.

Within the `<head>`, add a `<title>` element for the document (e.g., "Compendium: Chapter 100 - U.S. Copyright Office and the Copyright Law: General Background").

Include an <?xml-stylesheet> processing instruction to link to an external CSS file (e.g., `<?xml-stylesheet type="text/css" href="style.css"?>`).

The CSS should provide basic styling for:

Readability (e.g., serif/sans-serif fonts, line spacing, margins).

Accessibility (e.g., sufficient color contrast).

Structure (e.g., distinct styles/indentation for TOC items, section/subsection/provision titles, paragraphs, lists, citations).

Ensure the CSS rules target the defined XML elements (chapter, toc, tocitem, section, title, subsection, title, provision, title, paragraph, list, item, ref, a).

Output:

The final output must be a single, valid XML document incorporating all these requirements and functional internal links from the TOC. Ensure no text content from the original document (aside from headers/footers) is missed.

For display purposes, this XML document should be wrapped in an html document with a proper doctype declaration and a link to the CSS file for styling:
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
 { XML document goes here}
</body>
</html>

Your output should not include any preliminary text, explanation after the xhtml document and no CSS. 